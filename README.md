# TI C6000 DSP Bootloader â€“ AIS Protocol Compatible MCU Boot  
**MATLAB-Based TI-TXT Parsing â†’ AIS Struct Generation â†’ C Header Output**

---

## ğŸ“˜ English Description

### Overview
This repository provides a complete workflow for booting **TI C6000 series DSPs (e.g., TMS320C67xx)** using an external MCU through the **AIS (Application Image Script) boot protocol**.

In this project, all TI-TXT parsing and AIS command generation are performed **offline in MATLAB**.  
MATLAB processes the **TI-TXT hex file generated by the CCS C6000 Hex Utility**, converts the data into AIS command structures, and automatically exports them into a **C-compatible `.h` header file**.

The generated header file (e.g., `ais_image.h`) contains:
- AIS opcode structures  
- Load / Jump / Start / Fill command records  
- Program data blocks  
- AIS command sequence table  

This file is included in the MCU firmware and sent to the DSP over SPI or UART depending on the boot mode.

---

### ğŸ“„ Workflow Summary

#### 1. Build DSP application  
Compile your DSP code to generate:

```
project.out
```

#### 2. Convert DSP output to TI-TXT with AIS boot support  
```
hex6x â€“boot â€“o output.txt project.out
```

#### 3. MATLAB Offline Parsing  
The MATLAB script performs the following operations:

- Reads TI-TXT address and data blocks  
- Converts ASCII hex into binary words  
- Builds AIS opcode-based command records  
- Packs addresses, sizes, and payloads  
- Exports all AIS structures and data arrays into a **`.h` header file**  

#### 4. MCU Uses the Generated Header  
Simply include the file in your C project:

```c
#include "firmware_data.h"
```

The MCU then transmits the AIS commands exactly as structured in the header file.

---

### ğŸ§© AIS Data Structures Used in `.h` Output

MATLAB generates the following C structures:

```c
typedef struct {
    uint32_t address;
    uint32_t length;
    const uint32_t *data;
} firmware_section_t;
```

Example generated entries:

```c
static const uint32_t section_0001_data[24] = {
    0xE99FF23A, 0x000003E6, 0x00000000, 0x00000004, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 
    0x21000900, 0x240000E0, 0x240000E1, 0xD100FF45, 0x5700E1FF, 0x51008103, 0x0910E1E4, 0x79000003, 
    0x0100E1E4, 0x24004084, 0x0908C4C5, 0x6900C51F, 0x0904C4C5, 0x6900C50F, 0x0902C4C5, 0x6900C507
};

// Address: 0x10005C00, Length: 24 words

static const uint32_t section_0002_data[24] = {
    0x0901C4C5, 0x6900C503, 0x013C84E3, 0x79000039, 0x013884E3, 0x79000037, 0x0903C4C5, 0x6900C503, 
    0x013484E3, 0x79000033, 0x013084E3, 0x79000031, 0x0906C4C5, 0x6900C507, 0x0905C4C5, 0x6900C503, 
    0x012C84E3, 0x7900002B, 0x012884E3, 0x79000029, 0x0907C4C5, 0x6900C503, 0x012484E3, 0x79000025
};

// Address: 0x10005C60, Length: 24 words
.
.
.
.
static const firmware_section_t firmware_sections[113] = {
    { 0x10005C00, 24, section_0001_data },
    { 0x10005C60, 24, section_0002_data },
    { 0x10005CC0, 24, section_0003_data }...
};
```

All content is generated automatically by MATLAB.

---

### ğŸ”§ MCU Boot Process

1. MCU includes `firmware_data.h`  
2. MCU reads AIS command records  
3. MCU sends AIS commands sequentially to the DSP  
4. DSP bootloader loads data, executes commands, and jumps to the application  

---

---

## ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e AÃ§Ä±klama

### Genel BakÄ±ÅŸ
Bu depo, **TI C6000 serisi DSPâ€™lerin (TMS320C67xx vb.)**, harici bir MCU ile **AIS (Application Image Script) boot protokolÃ¼** kullanÄ±larak baÅŸlatÄ±lmasÄ± iÃ§in tam bir iÅŸ akÄ±ÅŸÄ± sunar.

Bu projede ayrÄ±ÅŸtÄ±rma iÅŸlemleri MCU Ã¼zerinde yapÄ±lmaz.  
**TI-TXT â†’ AIS dÃ¶nÃ¼ÅŸÃ¼mÃ¼ tamamen MATLAB iÃ§inde offline olarak gerÃ§ekleÅŸtirilir.**

MATLAB:
- CCS Hex Utility tarafÄ±ndan oluÅŸturulan **TI-TXT dosyasÄ±nÄ± okur**,  
- AIS komutlarÄ±na dÃ¶nÃ¼ÅŸtÃ¼rÃ¼r,  
- TÃ¼m AIS structâ€™larÄ±nÄ± ve veri bloklarÄ±nÄ± **`.h` formatÄ±nda dÄ±ÅŸa aktarÄ±r**.

OluÅŸturulan `ais_image.h` dosyasÄ± MCU yazÄ±lÄ±mÄ±na eklenerek DSPâ€™ye gÃ¶nderilecek tÃ¼m boot komutlarÄ±nÄ± iÃ§erir.

---

### ğŸ“„ Ä°ÅŸ AkÄ±ÅŸÄ± Ã–zeti

#### 1. DSP uygulamasÄ±nÄ± derle  
```
project.out
```

#### 2. Ã‡Ä±ktÄ±yÄ± TI-TXT formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r  
```
hex6x â€“boot â€“o output.txt project.out
```

#### 3. MATLAB AyrÄ±ÅŸtÄ±rma ve `.h` Ãœretimi  
MATLAB scripti aÅŸaÄŸÄ±daki iÅŸlemleri yapar:

- TI-TXT adres ve veri bloklarÄ±nÄ± okur  
- ASCII â†’ binary dÃ¶nÃ¼ÅŸÃ¼mÃ¼ yapar  
- AIS komut kayÄ±tlarÄ±nÄ± oluÅŸturur  
- Opcode, adres, boyut ve veri alanlarÄ±nÄ± paketler  
- TÃ¼m komutlarÄ± ve veri dizilerini **`.h` dosyasÄ±na yazar**  

#### 4. MCU TarafÄ±nda KullanÄ±m  
MCU koduna:

```c
#include "firmware_data.h"
```

eklemek yeterlidir.

MCU, bu komutlarÄ± DSPâ€™ye SPI veya UART Ã¼zerinden gÃ¶nderir.

---

### ğŸ§© `.h` DosyasÄ±nda OluÅŸturulan AIS YapÄ±larÄ±

MATLAB tarafÄ±ndan oluÅŸturulan C structâ€™larÄ±:

```c
typedef struct {
    uint32_t address;
    uint32_t length;
    const uint32_t *data;
} firmware_section_t;
```

Ã–rnek Ã§Ä±ktÄ±:

```c
static const uint32_t section_0001_data[24] = {
    0xE99FF23A, 0x000003E6, 0x00000000, 0x00000004, 0x00000000, 0x00000000, 0x00000000, 0x00000000, 
    0x21000900, 0x240000E0, 0x240000E1, 0xD100FF45, 0x5700E1FF, 0x51008103, 0x0910E1E4, 0x79000003, 
    0x0100E1E4, 0x24004084, 0x0908C4C5, 0x6900C51F, 0x0904C4C5, 0x6900C50F, 0x0902C4C5, 0x6900C507
};

// Address: 0x10005C00, Length: 24 words

static const uint32_t section_0002_data[24] = {
    0x0901C4C5, 0x6900C503, 0x013C84E3, 0x79000039, 0x013884E3, 0x79000037, 0x0903C4C5, 0x6900C503, 
    0x013484E3, 0x79000033, 0x013084E3, 0x79000031, 0x0906C4C5, 0x6900C507, 0x0905C4C5, 0x6900C503, 
    0x012C84E3, 0x7900002B, 0x012884E3, 0x79000029, 0x0907C4C5, 0x6900C503, 0x012484E3, 0x79000025
};

// Address: 0x10005C60, Length: 24 words
.
.
.
.
static const firmware_section_t firmware_sections[113] = {
    { 0x10005C00, 24, section_0001_data },
    { 0x10005C60, 24, section_0002_data },
    { 0x10005CC0, 24, section_0003_data }...
};
```

TÃ¼m iÃ§erik MATLAB tarafÄ±ndan otomatik Ã¼retilir.

---

### ğŸ”§ MCU Boot SÃ¼reci

1. MCU `firmware_data.h` dosyasÄ±nÄ± projeye dahil eder  
2. AIS komut dizisi MCU tarafÄ±ndan okunur  
3. AIS komutlarÄ± sÄ±rasÄ±yla DSPâ€™ye gÃ¶nderilir  
4. DSP bootloader komutlarÄ± Ã§alÄ±ÅŸtÄ±rÄ±r ve uygulamayÄ± baÅŸlatÄ±r  

---

